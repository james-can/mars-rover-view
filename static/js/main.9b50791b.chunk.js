(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,a){e.exports=a(334)},169:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),i=a.n(o),l=(a(169),a(162)),s=a(10),c=a(18),m=a(19),u=a(23),h=a(21),p=a(22),d=a(161),g=a.n(d),f=a(158),E=a.n(f),v=a(26),b=a(68),y=a.n(b),w=a(29),C=a.n(w),k=a(40),O=a.n(k),S=a(27),x=a.n(S),j=a(94),I=a.n(j),N=a(95),T=a.n(N),P=a(28),A=a.n(P),M=a(34),F=a.n(M),z=a(69),L=a.n(z),R=a(137),W=a.n(R),D=a(31),_=a.n(D),B=a(17),U=a.n(B),H=a(6),V=a.n(H),G=a(136),Z=a.n(G),q=a(16),J=a.n(q),$=a(33),Y=a.n($),K=a(67),Q=a.n(K),X=a(96),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",hasLoginError:!1,redirect:{active:!1,route:"/"}},a.controller=new AbortController,a.signal=a.controller.signal,a.validateEmail=function(e){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e)},a.handleSubmit=function(e){e.preventDefault();var t=a.validateEmail(a.state.email.trim()),n=t?"":"Please enter a valid email";a.setState(function(){return{emailErrorText:n,hasEmailError:!t}}),t&&!a.state.hasPasswordError&&fetch("https://shielded-woodland-10835.herokuapp.com/auth",{method:"POST",signal:a.signal,body:JSON.stringify({email:a.state.email.toLowerCase().trim(),password:a.state.password}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){if(!e.ok)throw console.log("error with new account request"),a.setState({hasLoginError:!0}),new Error("Failed to authenticate, status="+e.status);return e.text()}).then(function(e){console.log(a.props.match),a.props.login(a.state.email.toLowerCase(),e),console.log("this.props.referrer: "+a.props.referrer),a.setState({redirect:{active:!0,route:1===a.props.referrer?"/my-gallery":"/"}})}).catch(function(e){return console.log("error: "+e)})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleTextChange",value:function(e,t){t.persist(),this.setState(function(){return Object(v.a)({},e,t.target.value)})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.redirect;return a.active?r.a.createElement(Q.a,{to:a.route}):r.a.createElement("main",{className:t.main},r.a.createElement(O.a,null),r.a.createElement(_.a,{className:t.paper},r.a.createElement(y.a,{className:t.avatar},r.a.createElement(L.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(F.a,{htmlFor:"email"},"Email Address"),r.a.createElement(A.a,{type:"text",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:function(t){return e.handleTextChange("email",t)}})),r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(F.a,{htmlFor:"password"},"Password"),r.a.createElement(A.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleTextChange("password",t)}})),r.a.createElement(J.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(I.a,{control:r.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(X.a,{style:{textDecoration:"none",color:"inherit"},to:"/create-account"},r.a.createElement(Z.a,{component:"span",variant:"body2",onClick:function(){e.props.handleMenuNav(3)}},"Create Account"))),r.a.createElement(x.a,{error:!0},this.state.hasLoginError&&r.a.createElement(Y.a,null,"Invalid email or password"),this.state.hasEmailError&&r.a.createElement(Y.a,null,this.state.emailErrorText)),r.a.createElement(x.a,null,1===this.props.referrer&&r.a.createElement(Y.a,{filled:!0,className:t.infoMessage},r.a.createElement(W.a,{fontSize:"small"})," \xa0 You must be logged in to access that page")),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign in"))))}}]),t}(r.a.Component),te=V()(function(e){return{main:Object(v.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),infoMessage:{display:"flex",alignItems:"center"},paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(ee),ae=a(159),ne=a.n(ae),re=a(98),oe=a(5),ie=a.n(oe),le=a(138),se=a.n(le),ce=a(142),me=a.n(ce),ue=a(139),he=a.n(ue),pe=a(140),de=a.n(pe),ge=a(141),fe=a.n(ge),Ee=a(35),ve=a.n(Ee),be=a(70),ye=a.n(be),we=a(20),Ce={width:"auto",height:"auto",display:"block",overflow:"auto",overflowY:"scroll",userSelect:"none",zIndex:1e9,position:"fixed",bottom:0,right:0,top:0,left:0,backgroundColor:"rgba(66,66,66, .9)"},ke={position:"absolute",bottom:0,right:0,top:0,left:0,maxWidth:"60%",margin:"auto"};var Oe=Object(we.withStyles)(function(e){return{closeButton:{position:"absolute",top:2*e.spacing.unit,right:2*e.spacing.unit,width:64,height:64,padding:0}}})(function(e){var t=e.classes;return Object(n.useEffect)(function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="scroll"}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Ce},r.a.createElement(ve.a,{key:"close","aria-label":"Close",color:"default",className:t.closeButton,onClick:e.handleClose},r.a.createElement(ye.a,{fontSize:"large"})),r.a.createElement("img",{src:e.photo.img_src,style:ke,alt:"Full size image id: ".concat(e.photo.id)})))}),Se=a(71),xe=a.n(Se),je=a(147),Ie=a.n(je),Ne=a(72),Te=a.n(Ne),Pe=a(143),Ae=a.n(Pe),Me=a(145),Fe=a.n(Me),ze=a(146),Le=a.n(ze),Re=a(144),We=a.n(Re),De=function(e){var t=e.open,a=e.handleClose;return Object(n.useEffect)(function(){console.log("component renderd")}),r.a.createElement(se.a,{open:t,onClose:function(){return a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(he.a,{id:"alert-dialog-title"},"Confirm"),r.a.createElement(de.a,null,r.a.createElement(fe.a,{id:"alert-dialog-description"},"Are you sure you want to remove this image?")),r.a.createElement(me.a,null,r.a.createElement(C.a,{onClick:function(){return a(!1)},color:"primary"},"Cancel"),r.a.createElement(C.a,{onClick:function(){return a(!0)},color:"primary",autoFocus:!0},"Remove")))};var _e=Object(we.withStyles)(function(e){return{icon:{marginRight:2*e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper,width:"100%"},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(4*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px")},heroButtons:{marginTop:4*e.spacing.unit},layout:Object(v.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(8*e.spacing.unit,"px 0")},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:6*e.spacing.unit},info:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=new AbortController,o=a.signal,i=Object(n.useState)(!1),l=Object(re.a)(i,2),c=l[0],m=l[1],u=Object(n.useState)({photos:[],fullScreenImageIndex:-1}),h=Object(re.a)(u,2),p=h[0],d=h[1];Object(n.useEffect)(function(){return fetch("https://shielded-woodland-10835.herokuapp.com/gallery-saves",{method:"GET",signal:o,headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":sessionStorage.getItem("rover-view-token")}}).then(function(e){return e.ok||console.log("error loading gallery"),e.json()}).then(function(e){d(Object(s.a)({},p,{photos:e.map(function(e){var t=new Image;return t.src=e.img_src,Object(s.a)({imageObjectRef:t},e)})}))}).catch(function(e){return console.log("error: "+e)}),function(){a.abort()}},[]);var g=function(e){var t;t={removeIndex:e},console.log("key: ".concat(Object.keys(t)[0],", value: ").concat(t[Object.keys(t)[0]])),d(Object(s.a)({},p,t)),m(!0)},f=function(e){fetch("https://shielded-woodland-10835.herokuapp.com/gallery-saves",{method:"DELETE",signal:o,headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":sessionStorage.getItem("rover-view-token")},body:JSON.stringify({removeIndex:e})}).then(function(e){return e.ok||console.log("error loading gallery"),e.json()}).then(function(t){var a=p.photos;a.splice(e,1),d(Object(s.a)({},p,{photos:a}))}).catch(function(e){return console.log("error: "+e)})},E=p.photos,v=p.fullScreenImageIndex;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null),-1!==v&&r.a.createElement(Oe,{handleClose:function(){return d(Object(s.a)({},p,{fullScreenImageIndex:-1}))},photo:E[v]}),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroUnit},r.a.createElement("div",{className:t.heroContent},r.a.createElement(U.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Gallery"))),r.a.createElement("div",{className:ie()(t.layout,t.cardGrid)},r.a.createElement(J.a,{container:!0,spacing:40},E.map(function(e,a){return r.a.createElement(J.a,{item:!0,key:e.img_src,xs:6,sm:6,md:4,lg:3},r.a.createElement(xe.a,{className:t.card},r.a.createElement(Ae.a,{className:t.cardMedia,image:e.img_src,title:"image id: ".concat(e.id)}),r.a.createElement(Te.a,{className:t.cardContent},r.a.createElement(U.a,{gutterBottom:!0,color:"textSecondary",className:t.info},r.a.createElement(We.a,{fontSize:"small"}),"\xa0",e.rover.name),r.a.createElement(U.a,{gutterBottom:!0,color:"textSecondary",className:t.info},r.a.createElement(Fe.a,{fontSize:"small"}),"\xa0",e.camera.full_name),r.a.createElement(U.a,{gutterBottom:!0,color:"textSecondary",className:t.info},r.a.createElement(Le.a,{fontSize:"small"}),"\xa0",e.sol)),r.a.createElement(Ie.a,null,r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){return e=a,console.log("handleviewbuttonclick() called"),void d(Object(s.a)({},p,{fullScreenImageIndex:e}));var e}},"View"),r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){return g(a)}},"Remove"))))})),r.a.createElement(De,{open:c,handleClose:function(e){m(!1),e&&f(p.removeIndex)}}))),r.a.createElement("footer",{className:t.footer}))}),Be="Email already exists in the system",Ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",confirmPassword:"",hasPasswordError:!1,hasEmailError:!1,passwordErrorText:"",emailErrorText:"",redirect:!1},a.controller=new AbortController,a.signal=a.controller.signal,a.handleSubmit=function(e){e.preventDefault();var t=a.validateEmail(a.state.email.trim()),n=t?"":"Please enter a valid email";a.setState(function(){return{emailErrorText:n,hasEmailError:!t}}),!t&&a.state.emailErrorText!==Be||a.state.hasPasswordError||fetch("https://shielded-woodland-10835.herokuapp.com/users",{method:"POST",signal:a.signal,body:JSON.stringify({email:a.state.email.toLowerCase().trim(),password:a.state.password}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){if(400===e.status&&a.setState(function(){return{hasEmailError:!0,emailErrorText:Be}}),!e.ok)throw new Error("error with new account request, status="+e.status);return e.text()}).then(function(e){a.props.login(a.state.email.toLowerCase().trim(),e),a.setState({redirect:!0})}).catch(function(e){return console.log("error: "+e)})},a.validatePassword=function(e,t){return e!==t?"Passwords do not match":/\d/.test(e)&&/[a-z]/.test(e)&&/[A-Z]/.test(e)?e.length<8?"Password should be at least 8 characters":"":"Password should include at least one uppercase letter, one lowercase letter, and one number"},a.validateEmail=function(e){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"handleTextChange",value:function(e,t){var a=this;t.persist(),this.setState(function(n){var r,o="";switch(e){case"email":break;case"password":o=a.validatePassword(t.target.value,n.confirmPassword);break;case"confirmPassword":o=a.validatePassword(t.target.value,n.password)}return r={},Object(v.a)(r,e,t.target.value),Object(v.a)(r,"passwordErrorText",o),Object(v.a)(r,"hasPasswordError",0!==o.length),r})}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.state.redirect?r.a.createElement(Q.a,{to:"/"}):r.a.createElement("main",{className:t.main},r.a.createElement(O.a,null),r.a.createElement(_.a,{className:t.paper},r.a.createElement(y.a,{className:t.avatar},r.a.createElement(L.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Create Account"),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,error:this.state.hasEmailError},r.a.createElement(F.a,{htmlFor:"email"},"Email Address"),r.a.createElement(A.a,{type:"text",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:function(t){return e.handleTextChange("email",t)}}),this.state.hasEmailError&&r.a.createElement(Y.a,null,this.state.emailErrorText)),r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,error:this.state.hasPasswordError},r.a.createElement(F.a,{htmlFor:"password"},"Password"),r.a.createElement(A.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleTextChange("password",t)}})),r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,error:this.state.hasPasswordError},r.a.createElement(F.a,{htmlFor:"password"},"Confirm Password"),r.a.createElement(A.a,{name:"password",type:"password",id:"confirm-password",autoComplete:"current-password",value:this.state.confirmPassword,onChange:function(t){return e.handleTextChange("confirmPassword",t)}}),r.a.createElement(Y.a,null,this.state.passwordErrorText)),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Create Account"))))}}]),t}(r.a.Component),He=V()(function(e){return{main:Object(v.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(Ue),Ve=(a(129),a(160)),Ge=a.n(Ve),Ze=a(152),qe=a.n(Ze),Je=a(57),$e=a.n(Je),Ye=a(149),Ke=a.n(Ye),Qe=a(58),Xe=a.n(Qe),et=a(77),tt=a.n(et),at=a(78),nt=a.n(at),rt=a(148),ot=a.n(rt),it=a(150),lt=a.n(it),st=a(151),ct=a.n(st),mt=a(337),ut={list:{width:250},fullList:{width:"auto"},navLink:{textDecoration:"none",color:"inherit"}},ht=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={left:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=r.a.createElement("div",{className:t.list},r.a.createElement($e.a,null,r.a.createElement(mt.a,{activeStyle:ut.navLink,to:"/"},r.a.createElement(Xe.a,{button:!0},r.a.createElement(tt.a,null,r.a.createElement(ot.a,null)),r.a.createElement(nt.a,{primary:"Rover View"})))),r.a.createElement(Ke.a,null),r.a.createElement($e.a,null,r.a.createElement(mt.a,{activeStyle:ut.navLink,style:ut.navLink,to:"/sign-in"},r.a.createElement(Xe.a,{button:!0,onClick:function(){return e.props.handleMenuNav(0)}},r.a.createElement(tt.a,null,r.a.createElement(lt.a,null)),r.a.createElement(nt.a,{primary:this.props.loggedIn?"Sign Out":"Sign in"}))),r.a.createElement(mt.a,{activeStyle:ut.navLink,style:ut.navLink,to:"/my-gallery"},r.a.createElement(Xe.a,{button:!0,onClick:function(){return e.props.handleMenuNav(1)}},r.a.createElement(tt.a,null,r.a.createElement(ct.a,null)),r.a.createElement(nt.a,{primary:"My Gallery"}))),r.a.createElement($e.a,null)));return r.a.createElement("div",null,r.a.createElement(qe.a,{open:this.props.isOpen,onClose:function(){return e.props.toggleDrawer(!1)}},r.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return e.props.toggleDrawer(!1)},onKeyDown:function(){return e.props.toggleDrawer(!1)}},a)))}}]),t}(r.a.Component),pt=Object(we.withStyles)(ut)(ht),dt=a(55),gt=a(75),ft=a.n(gt),Et=a(41),vt=a.n(Et),bt=a(153),yt=a.n(bt),wt=a(154),Ct=a.n(wt),kt={margin:"0 auto",width:"100%",position:"relative",top:0,left:0},Ot=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{style:Object(s.a)({height:"".concat(1/e.aspect,"%")},kt),src:e.src,hidden:!e.show}))},St=a(74),xt=a.n(St),jt={width:"100%",maxWidth:"600px",borderRadius:"9999px",backgroundColor:"#ccc"},It=Object(s.a)({bottom:"auto",position:"fixed"},jt),Nt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).isScrolledIntoView=function(e){return e.getBoundingClientRect().top>=a.props.offset},a.handleScroll=function(e){var t=!a.isScrolledIntoView(a.myRef.current);a.setState({isFloating:t})},a.myRef=r.a.createRef(),a.state={isFloating:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props.offset<-30?this.props.offset-64:this.props.offset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{container:!0},r.a.createElement(J.a,{item:!0,xs:12},r.a.createElement("span",{style:{}}),r.a.createElement("div",{style:Object(s.a)({zIndex:this.props.zIndex},this.state.isFloating?Object(s.a)({},It,{top:20-this.props.offset}):jt)},this.props.children))),r.a.createElement("span",{ref:this.myRef,style:Object(s.a)({height:"56px"},this.props.absolute?{position:"absolute",top:e,left:e}:{})}))}}]),t}(n.Component);Nt.defaultProps={offset:0,absolute:!1,zIndex:1};var Tt=xt()(Nt),Pt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillUpdate",value:function(){document.body.style.overflow="scroll",document.body.style.paddingRight=0}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.children)}}]),t}(n.Component),At=a(155),Mt=a.n(At),Ft=a(76),zt=a.n(Ft),Lt={curiosity:{},opportunity:{},spirit:{}},Rt=function(e){for(var t=0,a={a:10,b:11,c:12,d:13,e:14,f:15},n=0;n<e.length;n++)t+=parseInt("abcdef".includes(e[n])?a[e[n]]:e[n])*Math.pow(16,e.length-1-n);return t},Wt=function(e){var t=e.photo_manifest.name.toLowerCase();Lt[t]=e.photo_manifest;for(var a=[],n=e.photo_manifest.photos,r=0,o=0;a.length<Lt[t].max_sol;r++)a.push(n[o].sol===r?n[o++]:{sol:r,earth_date:"",total_photos:0,cameras:[]});Lt[t].photos=a},Dt=function e(t){var a="https://shielded-woodland-10835.herokuapp.com/manifests/".concat(t);fetch(a).then(function(e){return e.json()}).then(Wt).catch(function(a){console.log("parsing failed",a),e(t)})},_t={position:"absolute",top:10,left:10,maxWidth:"600px"},Bt=function(){function e(t,a){Object(c.a)(this,e),this._abbrev=t,this._full=a,this._totalPhotos=0}return Object(m.a)(e,[{key:"abbrev",get:function(){return this._abbrev}},{key:"full",get:function(){return this._full}},{key:"totalPhotos",get:function(){return this._totalPhotos},set:function(e){this._totalPhotos=e}}]),e}(),Ut=[new Bt("fhaz","Front Hazard Avoidance"),new Bt("rhaz","Rear Hazard Avoidance"),new Bt("mast","Mast"),new Bt("chemcam","Chemistry and Camera Complex"),new Bt("mahli","Mars Hand Lens Imager"),new Bt("mardi","Mars Descent Imager"),new Bt("navcam","Navigation"),new Bt("pancam","Panoramic"),new Bt("minites","Miniature Thermal Emission Spectrometer")],Ht=["curiosity","opportunity","spirit"],Vt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getAvailablePhotos=function(){Lt.curiosity.photos&&Lt.opportunity.photos&&Lt.spirit.photos&&a.setState(function(e,t){return{photosAvailable:Lt[Ht[e.rover]].photos[e.sol||0].total_photos}})},a.handleLoadClick=function(e){var t="https://shielded-woodland-10835.herokuapp.com/".concat(Ht[a.state.rover],"/").concat(a.state.sol),n=Object(dt.a)(Object(dt.a)(a));fetch(t).then(function(e){return e.json()}).then(function(e){var t;n.setCameraDistrubtion(e.photos),n.setState(function(a,n){return t=0===a.rover?"mast":"pancam",{photos:e.photos,cam:t,roverCamIndex:a.rover}}),n.loadImages(t)}).catch(function(e){console.log("parsing failed",e)})},a.loadImages=function(e){var t=[],n=e.toUpperCase();for(var r in a.state.photos)if(n===a.state.photos[r].camera.name){var o=new Image;o.src=a.state.photos[r].img_src,o.originalIndex=r,o.onload=function(){},o.onerror=function(){},t.push(o)}a.setState(function(e,a){return{totalPhotos:t.length,imageObjects:[].concat(t),sliderValue:t.length>0?1:0}})},a.handleCamChange=function(e){a.setState({cam:e.target.value}),a.loadImages(e.target.value)},a.handleSliderChange=function(e,t){a.setState({sliderValue:t})},a.handleRoverChange=function(e){a.setState({rover:e.target.value}),a.getAvailablePhotos()},a.handleSolChange=function(e){var t=e.target.value;/^\d*$/.test(t)&&t>=0&&t<Lt[Ht[a.state.rover]].max_sol&&(a.setState({sol:/^0?$/.test(t)?0:t.replace(/^0*/,"")}),a.getAvailablePhotos())},a.setCameraDistrubtion=function(e){a.setState(function(t,a){var n={FHAZ:0,RHAZ:0,MAST:0,CHEMCAM:0,MAHLI:0,MARDI:0,NAVCAM:0,PANCAM:0,MINITES:0};for(var r in e)n[e[r].camera.name]++;return{roverCams:t.roverCams.map(function(e,a){return t.rover===a?e.map(function(e){var t={abbrev:e.abbrev,full:e.full,totalPhotos:0};return Object(s.a)({},t,{totalPhotos:n[e.abbrev.toUpperCase()]})}):e})}})},a.handleSaveImageClick=function(){if(a.props.loggedIn){var e=a.state,t=e.imageObjects,n=e.sliderValue,r=e.photos;fetch("https://shielded-woodland-10835.herokuapp.com/gallery-saves",{method:"POST",body:JSON.stringify({photo:JSON.stringify(r[t[n-1].originalIndex])}),headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":sessionStorage.getItem("rover-view-token")}}).then(function(e){if(!e.ok)throw new Error("HTTP error, status = "+e.status);return a.props.openSnackBar("Added to gallery"),e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},a.state={sliderValue:0,rover:0,roverCamIndex:0,totalPhotos:0,cam:"",sol:"0",photosAvailable:3702,imageObjects:[],photos:[],roverCams:[[0,1,2,3,4,5,6].map(function(e){return Ut[e]}),[0,1,6,7,8].map(function(e){return Ut[e]}),[0,1,6,7,8].map(function(e){return Ut[e]})]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){for(var e in Lt)Dt(e)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=.25*Math.min(this.props.windowWidth,600)+50>(this.props.windowWidth-600)/2;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroUnit},r.a.createElement("div",{className:t.heroContent},r.a.createElement(U.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Rover View"),r.a.createElement(U.a,{className:t.brief,variant:"h6",align:"center",color:"textSecondary",paragraph:!0},"Choose a rover, camera, and sol(Martian day, starting from the beginning of the mission), click load, and use the slider to animate the images"),r.a.createElement("div",null,r.a.createElement(J.a,{container:!0,justify:"space-evenly",alignItems:"center"},r.a.createElement(J.a,{item:!0,xs:6,sm:5},r.a.createElement(J.a,{container:!0,justify:"center"},r.a.createElement(x.a,{className:ie()(t.mainField,t.formControl)},r.a.createElement(F.a,{shrink:!0},"Rover"),r.a.createElement(ft.a,{value:this.state.rover,onChange:this.handleRoverChange,input:r.a.createElement(A.a,{name:"rover"}),displayEmpty:!0,name:"rover",className:t.selectEmpty},r.a.createElement(vt.a,{value:0},r.a.createElement(Pt,null,"Curiosity")),r.a.createElement(vt.a,{value:1},r.a.createElement(Pt,null,"Opportunity")),r.a.createElement(vt.a,{value:2},r.a.createElement(Pt,null,"Spirit"))),r.a.createElement(Y.a,null)))),r.a.createElement(J.a,{item:!0,xs:6,sm:1}),r.a.createElement(J.a,{item:!0,xs:6,sm:3},r.a.createElement(J.a,{container:!0,justify:"center"},r.a.createElement(x.a,{className:ie()(t.mainField,t.formControl)},r.a.createElement(yt.a,{className:t.solSpinner,label:"Sol",value:this.state.sol,onChange:this.handleSolChange,type:"number",helperText:"of ".concat(Lt[Ht[this.state.rover]].max_sol-1||2360),InputLabelProps:{shrink:!0}})))),r.a.createElement(J.a,{item:!0,xs:6,sm:3},r.a.createElement(C.a,{onClick:this.handleLoadClick,variant:"contained",color:"primary",className:t.button},"Load"),r.a.createElement(Y.a,null,this.state.photosAvailable," photos available ")),r.a.createElement(Tt,{offset:6,zIndex:3},r.a.createElement(J.a,{container:!0,justify:"space-evenly",alignItems:"center",className:t.sliderContainer},r.a.createElement(J.a,{item:!0,xs:10},r.a.createElement(Ct.a,{className:t.slider,value:this.state.sliderValue,min:1,max:this.state.totalPhotos,step:1,onChange:this.handleSliderChange})),r.a.createElement(J.a,{item:!0,xs:2,align:"center"},r.a.createElement(U.a,{variant:"h6",className:t.floatingDisplay},this.state.sliderValue)))))))),r.a.createElement("div",{className:ie()(t.layout,t.cardGrid)},r.a.createElement(xe.a,{className:t.card},r.a.createElement(Te.a,null,r.a.createElement("div",{className:t.imageContainer},this.state.imageObjects.map(function(t,a){return r.a.createElement(Ot,{aspect:t.width/t.height,show:e.state.sliderValue-1===a,src:t.src,key:t.src,alt:"frame ".concat(a)})}),this.state.photos.length>0&&r.a.createElement(r.a.Fragment,null,this.state.imageObjects.length>0&&r.a.createElement(ve.a,{onClick:this.handleSaveImageClick,style:{position:"absolute",top:"5px",right:"5px",zIndex:2}},r.a.createElement(zt.a,{title:this.props.loggedIn?"Add to My Gallery":"Sign in to add"},r.a.createElement(Mt.a,null))),r.a.createElement(Tt,{offset:a?-40:16,absolute:!0},r.a.createElement(J.a,{container:!0,justify:"space-between",style:Object(s.a)({},_t,{width:this.props.windowWidth-90})},r.a.createElement(J.a,{item:!0,xs:3},r.a.createElement(_.a,{className:t.camSelectContainerNested},r.a.createElement(x.a,{className:ie()(t.mainField,t.formControl)},r.a.createElement(F.a,{shrink:!0},"Camera"),r.a.createElement(ft.a,{value:this.state.cam||" ",onChange:this.handleCamChange,input:r.a.createElement(A.a,{name:"camera"}),displayEmpty:!0,name:"camera",className:ie()(t.selectEmpty)},this.state.roverCams[this.state.roverCamIndex].map(function(t,a){return(t.totalPhotos>0||e.state.cam===t.abbrev)&&r.a.createElement(vt.a,{key:a,value:t.abbrev},r.a.createElement(Pt,null,t.full," (".concat(t.totalPhotos,")")))})),r.a.createElement(Y.a,null,"rover: ".concat(Ht[this.state.roverCamIndex]))))))))))))))}}]),t}(r.a.Component),Gt=xt()(Object(we.withStyles)(function(e){var t;t=e.palette.primary.main,Rt("".concat(t[1]).concat(t[2])),Rt("".concat(t[3]).concat(t[4])),Rt("".concat(t[5]).concat(t[6]));return{slider:{padding:e.spacing.unit},floatingDisplay:{color:e.palette.primary.main},sliderContainer:{padding:"0 16px"},camSelect:{opacity:1,maxHeight:"100px"},camSelectContainerNested:{backgroundColor:"rgba(66,66,66, .9)"},imageContainer:{position:"relative",left:0,top:0,alignItems:"flex-start",minHeight:"1000px",justifyContent:"flex-start"},button:{margin:e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper,width:"100%"},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(4*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px")},layout:Object(v.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(e.spacing.unit,"px 0")},formControl:{margin:e.spacing.unit,width:120},mainField:{width:"90%"},camera:{minWidth:80},brief:{fontSize:".75em"}}})(Vt)),Zt=a(156),qt=a.n(Zt),Jt=a(157),$t=a.n(Jt),Yt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,a=Boolean(t);return r.a.createElement("div",null,r.a.createElement(zt.a,{title:this.props.email},r.a.createElement(ve.a,{"aria-owns":a?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(qt.a,null))),r.a.createElement($t.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:this.handleClose},r.a.createElement(vt.a,{onClick:function(){return e.props.logOut()}},r.a.createElement(Pt,null,r.a.createElement(X.a,{style:{textDecoration:"none",color:"inherit"},to:"/sign-in"},"Sign Out")))))}}]),t}(n.Component),Kt=a(339),Qt=a(340),Xt=a(163),ea=a(338),ta=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={pageToDisplay:2,drawerOpen:!1,loggedIn:!1,snackbarOpen:!1,email:"",menuIndexClicked:0},a.controller=new AbortController,a.signal=a.controller.signal,a.toggleDrawer=function(e){a.setState({drawerOpen:e})},a.goHome=function(){a.setState(function(){return{pageToDisplay:2}})},a.logOut=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("LOGGED OUT"),sessionStorage.removeItem("rover-view-token"),a.openSnackbar("Signed out",e),a.setState(function(){return{loggedIn:!1,email:"",menuIndexClicked:0}})},a.handleMenuNav=function(e){a.setState(function(t){var n={};return 0===e&&t.loggedIn&&(a.openSnackbar("Signed out"),sessionStorage.removeItem("rover-view-token"),n={loggedIn:!1,email:""}),Object(s.a)({},n,{menuIndexClicked:e})})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbarOpen:!1})},a.login=function(e,t){sessionStorage.setItem("rover-view-token",t),a.openSnackbar("Signed in as ".concat(e)),a.setState(function(t){return{loggedIn:!0,email:e}})},a.openSnackbar=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.setState(function(){return{snackBarMsg:e,snackbarOpen:t}})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("/mars-rover-view");var t=sessionStorage.getItem("rover-view-token");t&&(console.log("token exists"),fetch("https://shielded-woodland-10835.herokuapp.com/users/me",{method:"GET",signal:this.signal,headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":t}}).then(function(t){return t.ok||(console.log("Authentication error occurred"),e.logOut(!1)),t.json()}).then(function(t){e.setState({loggedIn:!0,email:t.email})}).catch(function(e){return console.log("error: "+e)}))}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.loggedIn;return r.a.createElement(Kt.a,{baseName:"/mars-rover-view"},r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{position:"static",className:t.appBar},r.a.createElement(ne.a,null,r.a.createElement(J.a,{container:!0,justify:"space-between"},r.a.createElement(ve.a,{onClick:function(){return e.toggleDrawer(!0)},style:{marginLeft:-12,marginRight:20},color:"inherit","aria-label":"Menu"},r.a.createElement(Ge.a,null)),this.state.loggedIn&&r.a.createElement(Yt,{email:this.state.email,logOut:this.logOut})),r.a.createElement(pt,{loggedIn:this.state.loggedIn,logout:this.logOut,toggleDrawer:this.toggleDrawer,isOpen:this.state.drawerOpen,goHome:this.goHome,handleMenuNav:this.handleMenuNav})),r.a.createElement(g.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbarOpen,autoHideDuration:6e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackBarMsg),action:[r.a.createElement(ve.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},r.a.createElement(ye.a,null))]})),r.a.createElement(Qt.a,null,r.a.createElement(Xt.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(Gt,{loggedIn:e.state.loggedIn,openSnackBar:e.openSnackbar})}}),r.a.createElement(Xt.a,{exact:!0,path:"/sign-in",render:function(t){return r.a.createElement(te,{referrer:e.state.menuIndexClicked,handleMenuNav:e.handleMenuNav,login:e.login})}}),r.a.createElement(Xt.a,{exact:!0,path:"/create-account",render:function(t){return r.a.createElement(He,{login:e.login})}}),r.a.createElement(Xt.a,{path:"/my-gallery",render:function(){return a?r.a.createElement(_e,null):r.a.createElement(ea.a,{to:"/sign-in"})}}))))}}]),t}(n.Component),aa=(n.Component,Object(we.withStyles)(function(e){return{appBar:{position:"relative",width:"100%"},snackBar:{color:"#FFF",backgroundColor:e.palette.primary.dark}}})(ta));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var na=a(97),ra=a.n(na),oa=a(93),ia=a.n(oa),la=a(56),sa=a.n(la),ca=Object(we.createMuiTheme)({palette:{primary:{ligth:"#69696a",main:"#28282a",dark:"#1e1e1f"},secondary:{light:"#fff5f8",main:"#ff3366",dark:"#e62958"},warning:{main:"#ffc071",dark:"#ffb25e"},error:{xLight:sa.a[50],main:sa.a[500],dark:sa.a[700]},success:{xLight:ra.a[50],dark:ra.a[700]}},typography:{fontFamily:"'Work Sans', sans-serif",fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:700,fontFamilySecondary:"'Roboto Condensed', sans-serif",useNextVariants:!0}}),ma={color:ca.palette.text.primary,fontWeight:ca.typography.fontWeightMedium,fontFamily:ca.typography.fontFamilySecondary,textTransform:"uppercase"},ua=(Object(s.a)({},ca,{palette:Object(s.a)({},ca.palette,{background:Object(s.a)({},ca.palette.background,{default:ca.palette.common.white,placeholder:ia.a[200]})}),typography:Object(s.a)({},ca.typography,{fontHeader:ma,h1:Object(s.a)({},ca.typography.h1,ma,{letterSpacing:0,fontSize:60}),h2:Object(s.a)({},ca.typography.h2,ma,{fontSize:48}),h3:Object(s.a)({},ca.typography.h3,ma,{fontSize:42}),h4:Object(s.a)({},ca.typography.h4,ma,{fontSize:36}),h5:Object(s.a)({},ca.typography.h5,{fontSize:20,fontWeight:ca.typography.fontWeightLight}),h6:Object(s.a)({},ca.typography.h6,ma,{fontSize:18}),subtitle1:Object(s.a)({},ca.typography.subtitle1,{fontSize:18}),body1:Object(s.a)({},ca.typography.body2,{fontWeight:ca.typography.fontWeightRegular,fontSize:16}),body2:Object(s.a)({},ca.typography.body1,{fontSize:14})})}),Object(we.createMuiTheme)({palette:{type:"dark",secondary:{main:"#b71c1c"},primary:{main:"#ab5810"}},typography:{useNextVariants:!0}}));i.a.render(r.a.createElement(we.MuiThemeProvider,{theme:ua},r.a.createElement(aa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[164,1,2]]]);
//# sourceMappingURL=main.9b50791b.chunk.js.map