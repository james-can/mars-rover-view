(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){e.exports=a(324)},163:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),l=(a(163),a(156)),s=a(15),c=a(17),m=a(18),u=a(23),h=a(20),p=a(22),d=a(155),g=a.n(d),f=a(152),E=a.n(f),v=a(26),b=a(68),y=a.n(b),w=a(35),C=a.n(w),k=a(39),O=a.n(k),S=a(27),x=a.n(S),j=a(94),I=a.n(j),N=a(95),T=a.n(N),P=a(28),M=a.n(P),A=a(33),z=a.n(A),F=a(69),L=a.n(F),W=a(136),R=a.n(W),D=a(32),_=a.n(D),B=a(21),U=a.n(B),H=a(6),V=a.n(H),G=a(135),Z=a.n(G),q=a(16),J=a.n(q),$=a(31),Y=a.n($),K=a(67),Q=a.n(K),X=a(96),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",hasLoginError:!1,redirect:{active:!1,route:"/"}},a.controller=new AbortController,a.signal=a.controller.signal,a.validateEmail=function(e){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e)},a.handleSubmit=function(e){e.preventDefault();var t=a.validateEmail(a.state.email.trim()),n=t?"":"Please enter a valid email";a.setState(function(){return{emailErrorText:n,hasEmailError:!t}}),t&&!a.state.hasPasswordError&&fetch("https://shielded-woodland-10835.herokuapp.com/auth",{method:"POST",signal:a.signal,body:JSON.stringify({email:a.state.email.trim(),password:a.state.password}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){if(!e.ok)throw console.log("error with new account request"),a.setState({hasLoginError:!0}),new Error("Failed to authenticate, status="+e.status);return e.text()}).then(function(e){console.log(a.props.match),a.props.login(a.state.email,e),console.log("this.props.referrer: "+a.props.referrer),a.setState({redirect:{active:!0,route:1===a.props.referrer?"/my-gallery":"/"}})}).catch(function(e){return console.log("error: "+e)})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleTextChange",value:function(e,t){t.persist(),this.setState(function(){return Object(v.a)({},e,t.target.value)})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.redirect;return a.active?r.a.createElement(Q.a,{to:a.route}):r.a.createElement("main",{className:t.main},r.a.createElement(O.a,null),r.a.createElement(_.a,{className:t.paper},r.a.createElement(y.a,{className:t.avatar},r.a.createElement(L.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{htmlFor:"email"},"Email Address"),r.a.createElement(M.a,{type:"text",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:function(t){return e.handleTextChange("email",t)}})),r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{htmlFor:"password"},"Password"),r.a.createElement(M.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleTextChange("password",t)}})),r.a.createElement(J.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(I.a,{control:r.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(X.a,{style:{textDecoration:"none",color:"inherit"},to:"/create-account"},r.a.createElement(Z.a,{component:"span",variant:"body2",onClick:function(){e.props.handleMenuNav(3)}},"Create Account"))),r.a.createElement(x.a,{error:!0},this.state.hasLoginError&&r.a.createElement(Y.a,null,"Invalid email or password"),this.state.hasEmailError&&r.a.createElement(Y.a,null,this.state.emailErrorText)),r.a.createElement(x.a,null,1===this.props.referrer&&r.a.createElement(Y.a,{filled:!0,className:t.infoMessage},r.a.createElement(R.a,{fontSize:"small"})," \xa0 You must be logged in to access that page")),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign in"))))}}]),t}(r.a.Component),te=V()(function(e){return{main:Object(v.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),infoMessage:{display:"flex",alignItems:"center"},paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(ee),ae=a(153),ne=a.n(ae),re=a(79),oe=a(5),ie=a.n(oe),le=a(34),se=a.n(le),ce=a(70),me=a.n(ce),ue=a(19),he={width:"auto",height:"auto",display:"block",overflow:"auto",overflowY:"scroll",userSelect:"none",zIndex:1e9,position:"fixed",bottom:0,right:0,top:0,left:0,backgroundColor:"rgba(66,66,66, .9)"},pe={position:"absolute",bottom:0,right:0,top:0,left:0,maxWidth:"60%",margin:"auto"};var de=Object(ue.withStyles)(function(e){return{closeButton:{position:"absolute",top:2*e.spacing.unit,right:2*e.spacing.unit,width:64,height:64,padding:0}}})(function(e){var t=e.classes;return Object(n.useEffect)(function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="scroll"}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:he},r.a.createElement(se.a,{key:"close","aria-label":"Close",color:"default",className:t.closeButton,onClick:e.handleClose},r.a.createElement(me.a,{fontSize:"large"})),r.a.createElement("img",{src:e.photo.img_src,style:pe,alt:"Full size image id: ".concat(e.photo.id)})))}),ge=a(71),fe=a.n(ge),Ee=a(141),ve=a.n(Ee),be=a(72),ye=a.n(be),we=a(137),Ce=a.n(we),ke=a(139),Oe=a.n(ke),Se=a(140),xe=a.n(Se),je=a(138),Ie=a.n(je);var Ne=Object(ue.withStyles)(function(e){return{icon:{marginRight:2*e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper,width:"100%"},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(4*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px")},heroButtons:{marginTop:4*e.spacing.unit},layout:Object(v.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(8*e.spacing.unit,"px 0")},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:6*e.spacing.unit},info:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=new AbortController,o=a.signal,i=Object(n.useState)([]),l=Object(re.a)(i,2),c=l[0],m=l[1],u=Object(n.useState)(-1),h=Object(re.a)(u,2),p=h[0],d=h[1],g=Object(n.useState)(0),f=Object(re.a)(g,2);return f[0],f[1],Object(n.useEffect)(function(){return fetch("https://shielded-woodland-10835.herokuapp.com/gallery-saves",{method:"GET",signal:o,headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":sessionStorage.getItem("rover-view-token")}}).then(function(e){return e.ok||console.log("error loading gallery"),e.json()}).then(function(e){m(e.map(function(e){var t=new Image;return t.src=e.img_src,Object(s.a)({imageObjectRef:t},e)}))}).catch(function(e){return console.log("error: "+e)}),function(){a.abort()}},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null),-1!==p&&r.a.createElement(de,{handleClose:function(){return d(-1)},photo:c[p]}),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroUnit},r.a.createElement("div",{className:t.heroContent},r.a.createElement(U.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Gallery"))),r.a.createElement("div",{className:ie()(t.layout,t.cardGrid)},r.a.createElement(J.a,{container:!0,spacing:40},c.map(function(e,a){return r.a.createElement(J.a,{item:!0,key:e.img_src,xs:6,sm:6,md:4,lg:3},r.a.createElement(fe.a,{className:t.card},r.a.createElement(Ce.a,{className:t.cardMedia,image:e.img_src,title:"image id: ".concat(e.id)}),r.a.createElement(ye.a,{className:t.cardContent},r.a.createElement(U.a,{gutterBottom:!0,color:"textSecondary",className:t.info},r.a.createElement(Ie.a,{fontSize:"small"}),"\xa0",e.rover.name),r.a.createElement(U.a,{gutterBottom:!0,color:"textSecondary",className:t.info},r.a.createElement(Oe.a,{fontSize:"small"}),"\xa0",e.camera.full_name),r.a.createElement(U.a,{gutterBottom:!0,color:"textSecondary",className:t.info},r.a.createElement(xe.a,{fontSize:"small"}),"\xa0",e.sol)),r.a.createElement(ve.a,null,r.a.createElement(C.a,{size:"small",color:"primary",onClick:function(){return function(e){console.log("handleviewbuttonclick() called"),d(e)}(a)}},"View"),r.a.createElement(C.a,{size:"small",color:"primary"},"Remove"))))})))),r.a.createElement("footer",{className:t.footer}))}),Te="Email already exists in the system",Pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",confirmPassword:"",hasPasswordError:!1,hasEmailError:!1,passwordErrorText:"",emailErrorText:"",redirect:!1},a.controller=new AbortController,a.signal=a.controller.signal,a.handleSubmit=function(e){e.preventDefault();var t=a.validateEmail(a.state.email.trim()),n=t?"":"Please enter a valid email";a.setState(function(){return{emailErrorText:n,hasEmailError:!t}}),!t&&a.state.emailErrorText!==Te||a.state.hasPasswordError||fetch("https://shielded-woodland-10835.herokuapp.com/users",{method:"POST",signal:a.signal,body:JSON.stringify({email:a.state.email.trim(),password:a.state.password}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){if(400===e.status&&a.setState(function(){return{hasEmailError:!0,emailErrorText:Te}}),!e.ok)throw new Error("error with new account request, status="+e.status);return e.text()}).then(function(e){a.props.login(a.state.email,e),a.setState({redirect:!0})}).catch(function(e){return console.log("error: "+e)})},a.validatePassword=function(e,t){return e!==t?"Passwords do not match":/\d/.test(e)&&/[a-z]/.test(e)&&/[A-Z]/.test(e)?e.length<8?"Password should be at least 8 characters":"":"Password should include at least one uppercase letter, one lowercase letter, and one number"},a.validateEmail=function(e){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"handleTextChange",value:function(e,t){var a=this;t.persist(),this.setState(function(n){var r,o="";switch(e){case"email":break;case"password":o=a.validatePassword(t.target.value,n.confirmPassword);break;case"confirmPassword":o=a.validatePassword(t.target.value,n.password)}return r={},Object(v.a)(r,e,t.target.value),Object(v.a)(r,"passwordErrorText",o),Object(v.a)(r,"hasPasswordError",0!==o.length),r})}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.state.redirect?r.a.createElement(Q.a,{to:"/"}):r.a.createElement("main",{className:t.main},r.a.createElement(O.a,null),r.a.createElement(_.a,{className:t.paper},r.a.createElement(y.a,{className:t.avatar},r.a.createElement(L.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Create Account"),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,error:this.state.hasEmailError},r.a.createElement(z.a,{htmlFor:"email"},"Email Address"),r.a.createElement(M.a,{type:"text",autoComplete:"email",autoFocus:!0,value:this.state.email,onChange:function(t){return e.handleTextChange("email",t)}}),this.state.hasEmailError&&r.a.createElement(Y.a,null,this.state.emailErrorText)),r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,error:this.state.hasPasswordError},r.a.createElement(z.a,{htmlFor:"password"},"Password"),r.a.createElement(M.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:function(t){return e.handleTextChange("password",t)}})),r.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,error:this.state.hasPasswordError},r.a.createElement(z.a,{htmlFor:"password"},"Confirm Password"),r.a.createElement(M.a,{name:"password",type:"password",id:"confirm-password",autoComplete:"current-password",value:this.state.confirmPassword,onChange:function(t){return e.handleTextChange("confirmPassword",t)}}),r.a.createElement(Y.a,null,this.state.passwordErrorText)),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Create Account"))))}}]),t}(r.a.Component),Me=V()(function(e){return{main:Object(v.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(Pe),Ae=(a(120),a(154)),ze=a.n(Ae),Fe=a(146),Le=a.n(Fe),We=a(57),Re=a.n(We),De=a(143),_e=a.n(De),Be=a(58),Ue=a.n(Be),He=a(77),Ve=a.n(He),Ge=a(78),Ze=a.n(Ge),qe=a(142),Je=a.n(qe),$e=a(144),Ye=a.n($e),Ke=a(145),Qe=a.n(Ke),Xe=a(327),et={list:{width:250},fullList:{width:"auto"},navLink:{textDecoration:"none",color:"inherit"}},tt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={left:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=r.a.createElement("div",{className:t.list},r.a.createElement(Re.a,null,r.a.createElement(Xe.a,{activeStyle:et.navLink,to:"/"},r.a.createElement(Ue.a,{button:!0},r.a.createElement(Ve.a,null,r.a.createElement(Je.a,null)),r.a.createElement(Ze.a,{primary:"Rover View"})))),r.a.createElement(_e.a,null),r.a.createElement(Re.a,null,r.a.createElement(Xe.a,{activeStyle:et.navLink,style:et.navLink,to:"/sign-in"},r.a.createElement(Ue.a,{button:!0,onClick:function(){return e.props.handleMenuNav(0)}},r.a.createElement(Ve.a,null,r.a.createElement(Ye.a,null)),r.a.createElement(Ze.a,{primary:this.props.loggedIn?"Sign Out":"Sign in"}))),r.a.createElement(Xe.a,{activeStyle:et.navLink,style:et.navLink,to:"/my-gallery"},r.a.createElement(Ue.a,{button:!0,onClick:function(){return e.props.handleMenuNav(1)}},r.a.createElement(Ve.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(Ze.a,{primary:"My Gallery"}))),r.a.createElement(Re.a,null)));return r.a.createElement("div",null,r.a.createElement(Le.a,{open:this.props.isOpen,onClose:function(){return e.props.toggleDrawer(!1)}},r.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return e.props.toggleDrawer(!1)},onKeyDown:function(){return e.props.toggleDrawer(!1)}},a)))}}]),t}(r.a.Component),at=Object(ue.withStyles)(et)(tt),nt=a(55),rt=a(75),ot=a.n(rt),it=a(41),lt=a.n(it),st=a(147),ct=a.n(st),mt=a(148),ut=a.n(mt),ht={margin:"0 auto",width:"100%",position:"relative",top:0,left:0},pt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{style:Object(s.a)({height:"".concat(1/e.aspect,"%")},ht),src:e.src,hidden:!e.show}))},dt=a(74),gt=a.n(dt),ft={width:"100%",maxWidth:"600px",borderRadius:"9999px",backgroundColor:"#ccc"},Et=Object(s.a)({bottom:"auto",position:"fixed"},ft),vt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).isScrolledIntoView=function(e){return e.getBoundingClientRect().top>=a.props.offset},a.handleScroll=function(e){var t=!a.isScrolledIntoView(a.myRef.current);a.setState({isFloating:t})},a.myRef=r.a.createRef(),a.state={isFloating:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props.offset<-30?this.props.offset-64:this.props.offset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{container:!0},r.a.createElement(J.a,{item:!0,xs:12},r.a.createElement("span",{style:{}}),r.a.createElement("div",{style:Object(s.a)({zIndex:this.props.zIndex},this.state.isFloating?Object(s.a)({},Et,{top:20-this.props.offset}):ft)},this.props.children))),r.a.createElement("span",{ref:this.myRef,style:Object(s.a)({height:"56px"},this.props.absolute?{position:"absolute",top:e,left:e}:{})}))}}]),t}(n.Component);vt.defaultProps={offset:0,absolute:!1,zIndex:1};var bt=gt()(vt),yt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillUpdate",value:function(){document.body.style.overflow="scroll",document.body.style.paddingRight=0}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.children)}}]),t}(n.Component),wt=a(149),Ct=a.n(wt),kt=a(76),Ot=a.n(kt),St={curiosity:{},opportunity:{},spirit:{}},xt=function(e){for(var t=0,a={a:10,b:11,c:12,d:13,e:14,f:15},n=0;n<e.length;n++)t+=parseInt("abcdef".includes(e[n])?a[e[n]]:e[n])*Math.pow(16,e.length-1-n);return t},jt=function(e){var t=e.photo_manifest.name.toLowerCase();St[t]=e.photo_manifest;for(var a=[],n=e.photo_manifest.photos,r=0,o=0;a.length<St[t].max_sol;r++)a.push(n[o].sol===r?n[o++]:{sol:r,earth_date:"",total_photos:0,cameras:[]});St[t].photos=a},It=function e(t){var a="https://shielded-woodland-10835.herokuapp.com/manifests/".concat(t);fetch(a).then(function(e){return e.json()}).then(jt).catch(function(a){console.log("parsing failed",a),e(t)})},Nt={position:"absolute",top:10,left:10,maxWidth:"600px"},Tt=function(){function e(t,a){Object(c.a)(this,e),this._abbrev=t,this._full=a,this._totalPhotos=0}return Object(m.a)(e,[{key:"abbrev",get:function(){return this._abbrev}},{key:"full",get:function(){return this._full}},{key:"totalPhotos",get:function(){return this._totalPhotos},set:function(e){this._totalPhotos=e}}]),e}(),Pt=[new Tt("fhaz","Front Hazard Avoidance"),new Tt("rhaz","Rear Hazard Avoidance"),new Tt("mast","Mast"),new Tt("chemcam","Chemistry and Camera Complex"),new Tt("mahli","Mars Hand Lens Imager"),new Tt("mardi","Mars Descent Imager"),new Tt("navcam","Navigation"),new Tt("pancam","Panoramic"),new Tt("minites","Miniature Thermal Emission Spectrometer")],Mt=["curiosity","opportunity","spirit"],At=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getAvailablePhotos=function(){St.curiosity.photos&&St.opportunity.photos&&St.spirit.photos&&a.setState(function(e,t){return{photosAvailable:St[Mt[e.rover]].photos[e.sol||0].total_photos}})},a.handleLoadClick=function(e){var t="https://shielded-woodland-10835.herokuapp.com/".concat(Mt[a.state.rover],"/").concat(a.state.sol),n=Object(nt.a)(Object(nt.a)(a));fetch(t).then(function(e){return e.json()}).then(function(e){var t;n.setCameraDistrubtion(e.photos),n.setState(function(a,n){return t=0===a.rover?"mast":"pancam",{photos:e.photos,cam:t,roverCamIndex:a.rover}}),n.loadImages(t)}).catch(function(e){console.log("parsing failed",e)})},a.loadImages=function(e){var t=[],n=e.toUpperCase();for(var r in a.state.photos)if(n===a.state.photos[r].camera.name){var o=new Image;o.src=a.state.photos[r].img_src,o.originalIndex=r,o.onload=function(){},o.onerror=function(){},t.push(o)}a.setState(function(e,a){return{totalPhotos:t.length,imageObjects:[].concat(t),sliderValue:t.length>0?1:0}})},a.handleCamChange=function(e){a.setState({cam:e.target.value}),a.loadImages(e.target.value)},a.handleSliderChange=function(e,t){a.setState({sliderValue:t})},a.handleRoverChange=function(e){a.setState({rover:e.target.value}),a.getAvailablePhotos()},a.handleSolChange=function(e){var t=e.target.value;/^\d*$/.test(t)&&t>=0&&t<St[Mt[a.state.rover]].max_sol&&(a.setState({sol:/^0?$/.test(t)?0:t.replace(/^0*/,"")}),a.getAvailablePhotos())},a.setCameraDistrubtion=function(e){a.setState(function(t,a){var n={FHAZ:0,RHAZ:0,MAST:0,CHEMCAM:0,MAHLI:0,MARDI:0,NAVCAM:0,PANCAM:0,MINITES:0};for(var r in e)n[e[r].camera.name]++;return{roverCams:t.roverCams.map(function(e,a){return t.rover===a?e.map(function(e){var t={abbrev:e.abbrev,full:e.full,totalPhotos:0};return Object(s.a)({},t,{totalPhotos:n[e.abbrev.toUpperCase()]})}):e})}})},a.handleSaveImageClick=function(){if(a.props.loggedIn){var e=a.state,t=e.imageObjects,n=e.sliderValue,r=e.photos;fetch("https://shielded-woodland-10835.herokuapp.com/gallery-saves",{method:"POST",body:JSON.stringify({photo:JSON.stringify(r[t[n-1].originalIndex])}),headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":sessionStorage.getItem("rover-view-token")}}).then(function(e){if(!e.ok)throw new Error("HTTP error, status = "+e.status);return a.props.openSnackBar("Added to gallery"),e.json()}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},a.state={sliderValue:0,rover:0,roverCamIndex:0,totalPhotos:0,cam:"",sol:"0",photosAvailable:3702,imageObjects:[],photos:[],roverCams:[[0,1,2,3,4,5,6].map(function(e){return Pt[e]}),[0,1,6,7,8].map(function(e){return Pt[e]}),[0,1,6,7,8].map(function(e){return Pt[e]})]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){for(var e in St)It(e)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=.25*Math.min(this.props.windowWidth,600)+50>(this.props.windowWidth-600)/2;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null),r.a.createElement("main",null,r.a.createElement("div",{className:t.heroUnit},r.a.createElement("div",{className:t.heroContent},r.a.createElement(U.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Rover View"),r.a.createElement(U.a,{className:t.brief,variant:"h6",align:"center",color:"textSecondary",paragraph:!0},"Choose a rover, camera, and sol(Martian day, starting from the beginning of the mission), click load, and use the slider to animate the images"),r.a.createElement("div",null,r.a.createElement(J.a,{container:!0,justify:"space-evenly",alignItems:"center"},r.a.createElement(J.a,{item:!0,xs:6,sm:5},r.a.createElement(J.a,{container:!0,justify:"center"},r.a.createElement(x.a,{className:ie()(t.mainField,t.formControl)},r.a.createElement(z.a,{shrink:!0},"Rover"),r.a.createElement(ot.a,{value:this.state.rover,onChange:this.handleRoverChange,input:r.a.createElement(M.a,{name:"rover"}),displayEmpty:!0,name:"rover",className:t.selectEmpty},r.a.createElement(lt.a,{value:0},r.a.createElement(yt,null,"Curiosity")),r.a.createElement(lt.a,{value:1},r.a.createElement(yt,null,"Opportunity")),r.a.createElement(lt.a,{value:2},r.a.createElement(yt,null,"Spirit"))),r.a.createElement(Y.a,null)))),r.a.createElement(J.a,{item:!0,xs:6,sm:1}),r.a.createElement(J.a,{item:!0,xs:6,sm:3},r.a.createElement(J.a,{container:!0,justify:"center"},r.a.createElement(x.a,{className:ie()(t.mainField,t.formControl)},r.a.createElement(ct.a,{className:t.solSpinner,label:"Sol",value:this.state.sol,onChange:this.handleSolChange,type:"number",helperText:"of ".concat(St[Mt[this.state.rover]].max_sol-1||2360),InputLabelProps:{shrink:!0}})))),r.a.createElement(J.a,{item:!0,xs:6,sm:3},r.a.createElement(C.a,{onClick:this.handleLoadClick,variant:"contained",color:"primary",className:t.button},"Load"),r.a.createElement(Y.a,null,this.state.photosAvailable," photos available ")),r.a.createElement(bt,{offset:6,zIndex:3},r.a.createElement(J.a,{container:!0,justify:"space-evenly",alignItems:"center",className:t.sliderContainer},r.a.createElement(J.a,{item:!0,xs:10},r.a.createElement(ut.a,{className:t.slider,value:this.state.sliderValue,min:1,max:this.state.totalPhotos,step:1,onChange:this.handleSliderChange})),r.a.createElement(J.a,{item:!0,xs:2,align:"center"},r.a.createElement(U.a,{variant:"h6",className:t.floatingDisplay},this.state.sliderValue)))))))),r.a.createElement("div",{className:ie()(t.layout,t.cardGrid)},r.a.createElement(fe.a,{className:t.card},r.a.createElement(ye.a,null,r.a.createElement("div",{className:t.imageContainer},this.state.imageObjects.map(function(t,a){return r.a.createElement(pt,{aspect:t.width/t.height,show:e.state.sliderValue-1===a,src:t.src,key:t.src,alt:"frame ".concat(a)})}),this.state.photos.length>0&&r.a.createElement(r.a.Fragment,null,this.state.imageObjects.length>0&&r.a.createElement(se.a,{onClick:this.handleSaveImageClick,style:{position:"absolute",top:"5px",right:"5px",zIndex:2}},r.a.createElement(Ot.a,{title:this.props.loggedIn?"Add to My Gallery":"Sign in to add"},r.a.createElement(Ct.a,null))),r.a.createElement(bt,{offset:a?-40:16,absolute:!0},r.a.createElement(J.a,{container:!0,justify:"space-between",style:Object(s.a)({},Nt,{width:this.props.windowWidth-90})},r.a.createElement(J.a,{item:!0,xs:3},r.a.createElement(_.a,{className:t.camSelectContainerNested},r.a.createElement(x.a,{className:ie()(t.mainField,t.formControl)},r.a.createElement(z.a,{shrink:!0},"Camera"),r.a.createElement(ot.a,{value:this.state.cam||" ",onChange:this.handleCamChange,input:r.a.createElement(M.a,{name:"camera"}),displayEmpty:!0,name:"camera",className:ie()(t.selectEmpty)},this.state.roverCams[this.state.roverCamIndex].map(function(t,a){return(t.totalPhotos>0||e.state.cam===t.abbrev)&&r.a.createElement(lt.a,{key:a,value:t.abbrev},r.a.createElement(yt,null,t.full," (".concat(t.totalPhotos,")")))})),r.a.createElement(Y.a,null,"rover: ".concat(Mt[this.state.roverCamIndex]))))))))))))))}}]),t}(r.a.Component),zt=gt()(Object(ue.withStyles)(function(e){var t;t=e.palette.primary.main,xt("".concat(t[1]).concat(t[2])),xt("".concat(t[3]).concat(t[4])),xt("".concat(t[5]).concat(t[6]));return{slider:{padding:e.spacing.unit},floatingDisplay:{color:e.palette.primary.main},sliderContainer:{padding:"0 16px"},camSelect:{opacity:1,maxHeight:"100px"},camSelectContainerNested:{backgroundColor:"rgba(66,66,66, .9)"},imageContainer:{position:"relative",left:0,top:0,alignItems:"flex-start",minHeight:"1000px",justifyContent:"flex-start"},button:{margin:e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper,width:"100%"},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(4*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px")},layout:Object(v.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(e.spacing.unit,"px 0")},formControl:{margin:e.spacing.unit,width:120},mainField:{width:"90%"},camera:{minWidth:80},brief:{fontSize:".75em"}}})(At)),Ft=a(150),Lt=a.n(Ft),Wt=a(151),Rt=a.n(Wt),Dt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,a=Boolean(t);return r.a.createElement("div",null,r.a.createElement(Ot.a,{title:this.props.email},r.a.createElement(se.a,{"aria-owns":a?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(Lt.a,null))),r.a.createElement(Rt.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:this.handleClose},r.a.createElement(lt.a,{onClick:function(){return e.props.logOut()}},r.a.createElement(yt,null,r.a.createElement(X.a,{style:{textDecoration:"none",color:"inherit"},to:"/sign-in"},"Sign Out")))))}}]),t}(n.Component),_t=a(329),Bt=a(330),Ut=a(157),Ht=a(328),Vt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={pageToDisplay:2,drawerOpen:!1,loggedIn:!1,snackbarOpen:!1,email:"",menuIndexClicked:0},a.controller=new AbortController,a.signal=a.controller.signal,a.toggleDrawer=function(e){a.setState({drawerOpen:e})},a.goHome=function(){a.setState(function(){return{pageToDisplay:2}})},a.logOut=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("LOGGED OUT"),sessionStorage.removeItem("rover-view-token"),a.openSnackbar("Signed out",e),a.setState(function(){return{loggedIn:!1,email:"",menuIndexClicked:0}})},a.handleMenuNav=function(e){a.setState(function(t){var n={};return 0===e&&t.loggedIn&&(a.openSnackbar("Signed out"),sessionStorage.removeItem("rover-view-token"),n={loggedIn:!1,email:""}),Object(s.a)({},n,{menuIndexClicked:e})})},a.handleSnackbarClose=function(e,t){"clickaway"!==t&&a.setState({snackbarOpen:!1})},a.login=function(e,t){sessionStorage.setItem("rover-view-token",t),a.openSnackbar("Signed in as ".concat(e)),a.setState(function(t){return{loggedIn:!0,email:e}})},a.openSnackbar=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.setState(function(){return{snackBarMsg:e,snackbarOpen:t}})},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("/mars-rover-view");var t=sessionStorage.getItem("rover-view-token");t&&(console.log("token exists"),fetch("https://shielded-woodland-10835.herokuapp.com/users/me",{method:"GET",signal:this.signal,headers:{"Content-type":"application/json; charset=UTF-8","x-auth-token":t}}).then(function(t){return t.ok||(console.log("Authentication error occurred"),e.logOut(!1)),t.json()}).then(function(t){e.setState({loggedIn:!0,email:t.email})}).catch(function(e){return console.log("error: "+e)}))}},{key:"componentWillUnmount",value:function(){this.controller.abort()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.loggedIn;return r.a.createElement(_t.a,{baseName:"/mars-rover-view"},r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{position:"static",className:t.appBar},r.a.createElement(ne.a,null,r.a.createElement(J.a,{container:!0,justify:"space-between"},r.a.createElement(se.a,{onClick:function(){return e.toggleDrawer(!0)},style:{marginLeft:-12,marginRight:20},color:"inherit","aria-label":"Menu"},r.a.createElement(ze.a,null)),this.state.loggedIn&&r.a.createElement(Dt,{email:this.state.email,logOut:this.logOut})),r.a.createElement(at,{loggedIn:this.state.loggedIn,logout:this.logOut,toggleDrawer:this.toggleDrawer,isOpen:this.state.drawerOpen,goHome:this.goHome,handleMenuNav:this.handleMenuNav})),r.a.createElement(g.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbarOpen,autoHideDuration:6e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackBarMsg),action:[r.a.createElement(se.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleSnackbarClose},r.a.createElement(me.a,null))]})),r.a.createElement(Bt.a,null,r.a.createElement(Ut.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(zt,{loggedIn:e.state.loggedIn,openSnackBar:e.openSnackbar})}}),r.a.createElement(Ut.a,{exact:!0,path:"/sign-in",render:function(t){return r.a.createElement(te,{referrer:e.state.menuIndexClicked,handleMenuNav:e.handleMenuNav,login:e.login})}}),r.a.createElement(Ut.a,{exact:!0,path:"/create-account",render:function(t){return r.a.createElement(Me,{login:e.login})}}),r.a.createElement(Ut.a,{path:"/my-gallery",render:function(){return a?r.a.createElement(Ne,null):r.a.createElement(Ht.a,{to:"/sign-in"})}}))))}}]),t}(n.Component),Gt=(n.Component,Object(ue.withStyles)(function(e){return{appBar:{position:"relative",width:"100%"},snackBar:{color:"#FFF",backgroundColor:e.palette.primary.dark}}})(Vt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Zt=a(97),qt=a.n(Zt),Jt=a(93),$t=a.n(Jt),Yt=a(56),Kt=a.n(Yt),Qt=Object(ue.createMuiTheme)({palette:{primary:{ligth:"#69696a",main:"#28282a",dark:"#1e1e1f"},secondary:{light:"#fff5f8",main:"#ff3366",dark:"#e62958"},warning:{main:"#ffc071",dark:"#ffb25e"},error:{xLight:Kt.a[50],main:Kt.a[500],dark:Kt.a[700]},success:{xLight:qt.a[50],dark:qt.a[700]}},typography:{fontFamily:"'Work Sans', sans-serif",fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:700,fontFamilySecondary:"'Roboto Condensed', sans-serif",useNextVariants:!0}}),Xt={color:Qt.palette.text.primary,fontWeight:Qt.typography.fontWeightMedium,fontFamily:Qt.typography.fontFamilySecondary,textTransform:"uppercase"},ea=(Object(s.a)({},Qt,{palette:Object(s.a)({},Qt.palette,{background:Object(s.a)({},Qt.palette.background,{default:Qt.palette.common.white,placeholder:$t.a[200]})}),typography:Object(s.a)({},Qt.typography,{fontHeader:Xt,h1:Object(s.a)({},Qt.typography.h1,Xt,{letterSpacing:0,fontSize:60}),h2:Object(s.a)({},Qt.typography.h2,Xt,{fontSize:48}),h3:Object(s.a)({},Qt.typography.h3,Xt,{fontSize:42}),h4:Object(s.a)({},Qt.typography.h4,Xt,{fontSize:36}),h5:Object(s.a)({},Qt.typography.h5,{fontSize:20,fontWeight:Qt.typography.fontWeightLight}),h6:Object(s.a)({},Qt.typography.h6,Xt,{fontSize:18}),subtitle1:Object(s.a)({},Qt.typography.subtitle1,{fontSize:18}),body1:Object(s.a)({},Qt.typography.body2,{fontWeight:Qt.typography.fontWeightRegular,fontSize:16}),body2:Object(s.a)({},Qt.typography.body1,{fontSize:14})})}),Object(ue.createMuiTheme)({palette:{type:"dark",secondary:{main:"#b71c1c"},primary:{main:"#ab5810"}},typography:{useNextVariants:!0}}));i.a.render(r.a.createElement(ue.MuiThemeProvider,{theme:ea},r.a.createElement(Gt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[158,1,2]]]);
//# sourceMappingURL=main.88d763d8.chunk.js.map