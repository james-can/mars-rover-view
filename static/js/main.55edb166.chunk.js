(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(257)},112:function(e,t,a){},257:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),i=a.n(r),s=(a(112),a(19)),l=a(49),c=a(44),m=a(48),h=a(31),u=a(32),p=a(33),d=a(43),f=a(5),g=a.n(f),v=a(100),b=a.n(v),E=a(103),y=a.n(E),C=a(99),w=a.n(C),x=a(15),j=a.n(x),S=a(101),k=a.n(S),O=a(36),N=a.n(O),I=a(20),P=a(34),A=a.n(P),M=a(47),_=a.n(M),R=a(46),F=a.n(R),L=a(37),V=a.n(L),W=a(27),H=a.n(W),D=a(102),z=a.n(D),B=a(104),T=a.n(B),U={margin:"0 auto",width:"100%",position:"relative",top:0,left:0},$=function(e){return o.a.createElement("img",{style:Object(s.a)({height:"".concat(1/e.aspect,"%")},U),src:e.src,hidden:!e.show})},G=a(105),J=a.n(G),Z=a(106),q=a.n(Z),K=a(30),Q=a.n(K),X=(a(113),a(35)),Y=a.n(X),ee=a(45),te=a.n(ee),ae={width:"100%",maxWidth:"600px",borderRadius:"9999px",zIndex:1,backgroundColor:"#ccc"},ne=Object(s.a)({bottom:"auto",position:"fixed"},ae),oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).isScrolledIntoView=function(e){return e.getBoundingClientRect().top>=a.props.offset},a.handleScroll=function(e){console.log("window width: "+a.props.windowWidth),a.setState({isFloating:!a.isScrolledIntoView(a.myRef.current)})},a.myRef=o.a.createRef(),a.state={isFloating:!1},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){this.props.classes;var e=this.props.offset<-30?this.props.offset-64:this.props.offset;return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{container:!0},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("span",{style:{}}),o.a.createElement("div",{style:this.state.isFloating?Object(s.a)({},ne,{top:20-this.props.offset}):ae},this.props.children))),o.a.createElement("span",{ref:this.myRef,style:Object(s.a)({height:"56px"},this.props.absolute?{position:"absolute",top:e,left:e}:{})}))}}]),t}(n.Component);oe.defaultProps={offset:0,absolute:!1};var re=te()(oe),ie={curiosity:{},opportunity:{},spirit:{}},se=function(e){console.log("hex: "+e);for(var t=0,a={a:10,b:11,c:12,d:13,e:14,f:15},n=0;n<e.length;n++)t+=parseInt("abcdef".includes(e[n])?a[e[n]]:e[n])*Math.pow(16,e.length-1-n);return t},le=function(e){console.log("json: "+e);var t=e.photo_manifest.name.toLowerCase();ie[t]=e.photo_manifest;for(var a=[],n=e.photo_manifest.photos,o=0,r=0;a.length<ie[t].max_sol;o++)a.push(n[r].sol===o?n[r++]:{sol:o,earth_date:"",total_photos:0,cameras:[]});ie[t].photos=a},ce=function e(t){var a="https://shielded-woodland-10835.herokuapp.com/manifests/".concat(t);console.log("fetchurl: "+a),fetch(a).then(function(e){return e.json()}).then(le).catch(function(a){console.log("parsing failed",a),console.log("typeof ex: "+typeof a),"object"==typeof a&&console.log("ex keys: "+Object.keys(a)),e(t)})};for(var me in ie)ce(me);var he=function(){function e(t,a){Object(u.a)(this,e),this._abbrev=t,this._full=a,this._totalPhotos=0}return Object(p.a)(e,[{key:"abbrev",get:function(){return this._abbrev}},{key:"full",get:function(){return this._full}},{key:"totalPhotos",get:function(){return this._totalPhotos},set:function(e){this._totalPhotos=e}}]),e}(),ue=[new he("fhaz","Front Hazard Avoidance"),new he("rhaz","Rear Hazard Avoidance"),new he("mast","Mast"),new he("chemcam","Chemistry and Camera Complex"),new he("mahli","Mars Hand Lens Imager"),new he("mardi","Mars Descent Imager"),new he("navcam","Navigation"),new he("pancam","Panoramic"),new he("minites","Miniature Thermal Emission Spectrometer")],pe=["curiosity","opportunity","spirit"],de=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).getAvailablePhotos=function(){ie.curiosity.photos&&ie.opportunity.photos&&ie.spirit.photos&&a.setState(function(e,t){return{photosAvailable:ie[pe[e.rover]].photos[e.sol||0].total_photos}})},a.handleLoadClick=function(e){var t="https://shielded-woodland-10835.herokuapp.com/".concat(pe[a.state.rover],"/").concat(a.state.sol);console.log("fetchUrl: "+t);var n=Object(h.a)(Object(h.a)(a));fetch(t).then(function(e){return e.json()}).then(function(e){var t;n.setCameraDistrubtion(e.photos),n.setState(function(a,n){return t=0===a.rover?"mast":"pancam",{photos:e.photos,cam:t,roverCamIndex:a.rover}}),n.loadImages(t)}).catch(function(e){console.log("parsing failed",e)})},a.loadImages=function(e){var t=[],n=e.toUpperCase();for(var o in a.state.photos)if(n===a.state.photos[o].camera.name){var r=new Image;r.src=a.state.photos[o].img_src,r.onload=function(){},r.onerror=function(){},t.push(r)}a.setState(function(e,a){return{totalPhotos:t.length,imageObjects:[].concat(t),sliderValue:t.length>0?1:0}})},a.handleCamChange=function(e){a.setState({cam:e.target.value}),a.loadImages(e.target.value)},a.handleSliderChange=function(e,t){a.setState({sliderValue:t})},a.handleRoverChange=function(e){a.setState({rover:e.target.value}),a.getAvailablePhotos()},a.handleSolChange=function(e){var t=e.target.value;/^\d*$/.test(t)&&t>=0&&t<ie[pe[a.state.rover]].max_sol&&(a.setState({sol:/^0?$/.test(t)?0:t.replace(/^0*/,"")}),a.getAvailablePhotos())},a.setCameraDistrubtion=function(e){a.setState(function(t,a){var n={FHAZ:0,RHAZ:0,MAST:0,CHEMCAM:0,MAHLI:0,MARDI:0,NAVCAM:0,PANCAM:0,MINITES:0};for(var o in e)n[e[o].camera.name]++;return{roverCams:t.roverCams.map(function(e,a){return t.rover===a?e.map(function(e){var t={abbrev:e.abbrev,full:e.full,totalPhotos:0};return Object(s.a)({},t,{totalPhotos:n[e.abbrev.toUpperCase()]})}):e})}})},a.state={sliderValue:0,rover:0,roverCamIndex:0,totalPhotos:0,cam:"",sol:"0",photosAvailable:3702,imageObjects:[],photos:[],roverCams:[[0,1,2,3,4,5,6].map(function(e){return ue[e]}),[0,1,6,7,8].map(function(e){return ue[e]}),[0,1,6,7,8].map(function(e){return ue[e]})]},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=Math.min(this.props.windowWidth,600)*(4/12)+50>(this.props.windowWidth-600)/2;return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,null),o.a.createElement(b.a,{position:"static",className:t.appBar},o.a.createElement(k.a,null,o.a.createElement(N.a,{variant:"h6",color:"inherit",noWrap:!0},"Rover View"))),o.a.createElement("main",null,o.a.createElement("div",{className:t.heroUnit},o.a.createElement("div",{className:t.heroContent},o.a.createElement(N.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Rover View"),o.a.createElement(N.a,{className:t.brief,variant:"h6",align:"center",color:"textSecondary",paragraph:!0},"Choose a rover, camera, and sol(Martian day, starting from the beginning of the mission), click load, and use the slider to animate the images"),o.a.createElement("div",null,o.a.createElement(j.a,{container:!0,justify:"space-evenly",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:6,sm:5},o.a.createElement(j.a,{container:!0,justify:"center"},o.a.createElement(A.a,{className:g()(t.mainField,t.formControl)},o.a.createElement(F.a,{shrink:!0},"Rover"),o.a.createElement(_.a,{value:this.state.rover,onChange:this.handleRoverChange,input:o.a.createElement(H.a,{name:"rover"}),displayEmpty:!0,name:"rover",className:t.selectEmpty},o.a.createElement(V.a,{value:0},"Curiosity"),o.a.createElement(V.a,{value:1},"Opportunity"),o.a.createElement(V.a,{value:2},"Spirit")),o.a.createElement(Y.a,null)))),o.a.createElement(j.a,{item:!0,xs:6,sm:1}),o.a.createElement(j.a,{item:!0,xs:6,sm:3},o.a.createElement(j.a,{container:!0,justify:"center"},o.a.createElement(A.a,{className:g()(t.mainField,t.formControl)},o.a.createElement(z.a,{className:t.solSpinner,label:"Sol",value:this.state.sol,onChange:this.handleSolChange,type:"number",helperText:"of ".concat(ie[pe[this.state.rover]].max_sol-1||2360),InputLabelProps:{shrink:!0}})))),o.a.createElement(j.a,{item:!0,xs:6,sm:3},o.a.createElement(y.a,{onClick:this.handleLoadClick,variant:"contained",color:"primary",className:t.button},"Load"),o.a.createElement(Y.a,null,this.state.photosAvailable," photos available ")),o.a.createElement(re,{offset:6,children:o.a.createElement(j.a,{container:!0,justify:"space-evenly",alignItems:"center",className:t.sliderContainer},o.a.createElement(j.a,{item:!0,xs:10},o.a.createElement(T.a,{className:t.slider,value:this.state.sliderValue,min:1,max:this.state.totalPhotos,step:1,onChange:this.handleSliderChange})),o.a.createElement(j.a,{item:!0,xs:2,align:"center"},o.a.createElement(N.a,{variant:"h6",className:t.floatingDisplay},this.state.sliderValue)))}))))),o.a.createElement("div",{className:g()(t.layout,t.cardGrid)},o.a.createElement(J.a,{className:t.card},o.a.createElement(q.a,null,o.a.createElement("div",{className:t.imageContainer},this.state.imageObjects.map(function(t,a){return o.a.createElement($,{aspect:t.width/t.height,show:e.state.sliderValue-1===a,src:t.src,key:t.src,alt:"frame ".concat(a)})}),this.state.photos.length>0&&o.a.createElement(re,{offset:a?-40:16,absolute:!0,children:o.a.createElement(j.a,{container:!0,justify:"space-between",className:t.camSelectContainer},o.a.createElement(j.a,{item:!0,xs:4},o.a.createElement(Q.a,{className:t.camSelectContainerNested},o.a.createElement(A.a,{className:g()(t.mainField,t.formControl)},o.a.createElement(F.a,{shrink:!0},"Camera"),o.a.createElement(_.a,{value:this.state.cam||" ",onChange:this.handleCamChange,input:o.a.createElement(H.a,{name:"camera"}),displayEmpty:!0,name:"camera",className:g()(t.selectEmpty)},this.state.roverCams[this.state.roverCamIndex].map(function(t,a){return(t.totalPhotos>0||e.state.cam===t.abbrev)&&o.a.createElement(V.a,{key:a,value:t.abbrev},t.full," (".concat(t.totalPhotos,")"))})),o.a.createElement(Y.a,null,"rover: ".concat(pe[this.state.rover]))))))})))))))}}]),t}(o.a.Component),fe=te()(Object(I.withStyles)(function(e){var t;t=e.palette.primary.main,se("".concat(t[1]).concat(t[2])),se("".concat(t[3]).concat(t[4])),se("".concat(t[5]).concat(t[6]));return{slider:{padding:e.spacing.unit},floatingDisplay:{color:e.palette.primary.main},camSelectContainer:{position:"absolute",top:10,left:10,maxWidth:"600px"},sliderContainer:{padding:"0 16px"},camSelect:{opacity:1,maxHeight:"100px"},camSelectContainerNested:{backgroundColor:"rgba(66,66,66, .9)"},imageContainer:{position:"relative",left:0,top:0,alignItems:"flex-start",minHeight:"1000px",justifyContent:"flex-start"},appBar:{position:"relative",width:"100%"},button:{margin:e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper,width:"100%"},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(4*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px")},layout:Object(d.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(e.spacing.unit,"px 0")},formControl:{margin:e.spacing.unit,width:120},mainField:{width:"90%"},camera:{minWidth:80},brief:{fontSize:".75em"}}})(de));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge=Object(I.createMuiTheme)({palette:{type:"dark",secondary:{main:"#b71c1c"},primary:{main:"#ab5810"}}});i.a.render(o.a.createElement(I.MuiThemeProvider,{theme:ge},o.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[107,1,2]]]);
//# sourceMappingURL=main.55edb166.chunk.js.map